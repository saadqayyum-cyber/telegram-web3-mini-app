{"version":3,"file":"static/js/7966.0f7f7f0c.chunk.js","mappings":"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","sources":["../node_modules/@thirdweb-dev/react-core/node_modules/@thirdweb-dev/wallets/dist/http-rpc-client-0a079e80.browser.esm.js","../node_modules/@thirdweb-dev/react-core/node_modules/@thirdweb-dev/wallets/dist/zk-connector-fada2157.browser.esm.js"],"sourcesContent":["import { utils, BigNumber, providers } from 'ethers';\nimport { i as isTwUrl } from './url-a45219bd.browser.esm.js';\nimport { s as setAnalyticsHeaders } from './headers-733a8199.browser.esm.js';\nimport { e as isZkSyncChain, M as MANAGED_ACCOUNT_GAS_BUFFER } from './utils-f58e7acc.browser.esm.js';\n\nasync function hexlifyUserOp(\n// TODO: types\nop) {\n  const userOp = await utils.resolveProperties(op);\n  return Object.keys(userOp).map(key => {\n    let val = userOp[key];\n    if (typeof val !== \"string\" || !val.startsWith(\"0x\")) {\n      val = utils.hexValue(val);\n    }\n    return [key, val];\n  }).reduce((set, _ref) => {\n    let [k, v] = _ref;\n    return {\n      ...set,\n      [k]: v\n    };\n  }, {});\n}\n\n// v0.6 userOpHash calculation\nasync function getUserOpHashV06(userOp, entryPoint, chainId) {\n  const op = await utils.resolveProperties(userOp);\n  const hashedUserOp = {\n    sender: op.sender,\n    nonce: op.nonce,\n    initCodeHash: utils.keccak256(op.initCode),\n    callDataHash: utils.keccak256(op.callData),\n    callGasLimit: op.callGasLimit,\n    verificationGasLimit: op.verificationGasLimit,\n    preVerificationGas: op.preVerificationGas,\n    maxFeePerGas: op.maxFeePerGas,\n    maxPriorityFeePerGas: op.maxPriorityFeePerGas,\n    paymasterAndDataHash: utils.keccak256(op.paymasterAndData)\n  };\n  const userOpType = {\n    components: [{\n      type: \"address\",\n      name: \"sender\"\n    }, {\n      type: \"uint256\",\n      name: \"nonce\"\n    }, {\n      type: \"bytes32\",\n      name: \"initCodeHash\"\n    }, {\n      type: \"bytes32\",\n      name: \"callDataHash\"\n    }, {\n      type: \"uint256\",\n      name: \"callGasLimit\"\n    }, {\n      type: \"uint256\",\n      name: \"verificationGasLimit\"\n    }, {\n      type: \"uint256\",\n      name: \"preVerificationGas\"\n    }, {\n      type: \"uint256\",\n      name: \"maxFeePerGas\"\n    }, {\n      type: \"uint256\",\n      name: \"maxPriorityFeePerGas\"\n    }, {\n      type: \"bytes32\",\n      name: \"paymasterAndDataHash\"\n    }],\n    name: \"hashedUserOp\",\n    type: \"tuple\"\n  };\n  const encoded = utils.defaultAbiCoder.encode([userOpType], [{\n    ...hashedUserOp\n  }]);\n  // remove leading word (total length) and trailing word (zero-length signature)\n\n  const userOpHash = utils.keccak256(encoded);\n  const enc = utils.defaultAbiCoder.encode([\"bytes32\", \"address\", \"uint256\"], [userOpHash, entryPoint, chainId]);\n  return utils.keccak256(enc);\n}\nconst generateRandomUint192 = () => {\n  const rand1 = BigInt(Math.floor(Math.random() * 0x100000000));\n  const rand2 = BigInt(Math.floor(Math.random() * 0x100000000));\n  const rand3 = BigInt(Math.floor(Math.random() * 0x100000000));\n  const rand4 = BigInt(Math.floor(Math.random() * 0x100000000));\n  const rand5 = BigInt(Math.floor(Math.random() * 0x100000000));\n  const rand6 = BigInt(Math.floor(Math.random() * 0x100000000));\n  return rand1 << BigInt(160) | rand2 << BigInt(128) | rand3 << BigInt(96) | rand4 << BigInt(64) | rand5 << BigInt(32) | rand6;\n};\nconst randomNonce = () => {\n  let hexString = generateRandomUint192().toString(16);\n  if (hexString.length % 2 !== 0) {\n    hexString = \"0\" + hexString;\n  }\n  hexString = \"0x\" + hexString;\n  return BigNumber.from(utils.concat([hexString, \"0x0000000000000000\"]));\n};\n\nconst DEBUG = false; // TODO set as public flag\n\nclass HttpRpcClient {\n  constructor(bundlerUrl, entryPointAddress, chainId, clientId, secretKey) {\n    this.bundlerUrl = bundlerUrl;\n    this.entryPointAddress = entryPointAddress;\n    this.chainId = chainId;\n    const headers = {};\n    if (isTwUrl(this.bundlerUrl)) {\n      const bundleId = typeof globalThis !== \"undefined\" && \"APP_BUNDLE_ID\" in globalThis ? globalThis.APP_BUNDLE_ID : undefined;\n      if (secretKey) {\n        headers[\"x-secret-key\"] = secretKey;\n      } else if (clientId) {\n        headers[\"x-client-id\"] = clientId;\n        if (bundleId) {\n          headers[\"x-bundle-id\"] = bundleId;\n        }\n      }\n\n      // Dashboard token\n      if (typeof globalThis !== \"undefined\" && \"TW_AUTH_TOKEN\" in globalThis && typeof globalThis.TW_AUTH_TOKEN === \"string\") {\n        headers[\"authorization\"] = `Bearer ${globalThis.TW_AUTH_TOKEN}`;\n      }\n\n      // CLI token\n      if (typeof globalThis !== \"undefined\" && \"TW_CLI_AUTH_TOKEN\" in globalThis && typeof globalThis.TW_CLI_AUTH_TOKEN === \"string\") {\n        headers[\"authorization\"] = `Bearer ${globalThis.TW_CLI_AUTH_TOKEN}`;\n        headers[\"x-authorize-wallet\"] = \"true\";\n      }\n      setAnalyticsHeaders(headers);\n    }\n    this.userOpJsonRpcProvider = new providers.StaticJsonRpcProvider({\n      url: this.bundlerUrl,\n      headers\n    }, {\n      name: \"Connected bundler network\",\n      chainId\n    });\n    this.initializing = this.validateChainId();\n  }\n  async validateChainId() {\n    if (await isZkSyncChain(this.chainId)) {\n      return;\n    }\n    // validate chainId is in sync with expected chainid\n    const chain = await this.userOpJsonRpcProvider.send(\"eth_chainId\", []);\n    const bundlerChain = parseInt(chain);\n    if (bundlerChain !== this.chainId) {\n      throw new Error(`bundler ${this.bundlerUrl} is on chainId ${bundlerChain}, but provider is on chainId ${this.chainId}`);\n    }\n  }\n\n  /**\n   * send a UserOperation to the bundler\n   * @param userOp1 - The UserOperation to send\n   * @returns userOpHash the id of this operation, for getUserOperationTransaction\n   */\n  async sendUserOpToBundler(userOp1) {\n    await this.initializing;\n    const hexifiedUserOp = await hexlifyUserOp(userOp1);\n    const jsonRequestData = [hexifiedUserOp, this.entryPointAddress];\n    await this.printUserOperation(\"eth_sendUserOperation\", jsonRequestData);\n    return await this.userOpJsonRpcProvider.send(\"eth_sendUserOperation\", [hexifiedUserOp, this.entryPointAddress]);\n  }\n  async estimateUserOpGas(userOp) {\n    await this.initializing;\n    const hexifiedUserOp = await hexlifyUserOp(userOp);\n    const jsonRequestData = [hexifiedUserOp, this.entryPointAddress];\n    await this.printUserOperation(\"eth_estimateUserOperationGas\", jsonRequestData);\n    const data = await this.userOpJsonRpcProvider.send(\"eth_estimateUserOperationGas\", [hexifiedUserOp, this.entryPointAddress]);\n    // adds gas buffer to callGasLimit to account for ManagedAccountFactory delegate calls\n    return {\n      preVerificationGas: BigNumber.from(data.preVerificationGas),\n      verificationGas: BigNumber.from(data.verificationGas),\n      verificationGasLimit: BigNumber.from(data.verificationGasLimit),\n      callGasLimit: BigNumber.from(data.callGasLimit).add(MANAGED_ACCOUNT_GAS_BUFFER)\n    };\n  }\n  async getUserOperationGasPrice() {\n    await this.initializing;\n    return await this.userOpJsonRpcProvider.send(\"thirdweb_getUserOperationGasPrice\", []);\n  }\n  async getUserOperationReceipt(userOpHash) {\n    await this.initializing;\n    return await this.userOpJsonRpcProvider.send(\"eth_getUserOperationReceipt\", [userOpHash]);\n  }\n  async zkPaymasterData(transactionInput) {\n    await this.initializing;\n    return await this.userOpJsonRpcProvider.send(\"zk_paymasterData\", [await hexlifyUserOp({\n      ...transactionInput,\n      gas: transactionInput.gasLimit\n    })]);\n  }\n  async zkBroadcastTransaction(transactionInput) {\n    await this.initializing;\n    return await this.userOpJsonRpcProvider.send(\"zk_broadcastTransaction\", [transactionInput]);\n  }\n  async printUserOperation(method, _ref) {\n    {\n      return;\n    }\n  }\n}\n\nexport { DEBUG as D, HttpRpcClient as H, getUserOpHashV06 as g, hexlifyUserOp as h, randomNonce as r };\n","import { _ as _defineProperty } from './defineProperty-350fc508.browser.esm.js';\nimport { C as Connector } from './connector-05689d68.browser.esm.js';\nimport { H as HttpRpcClient } from './http-rpc-client-0a079e80.browser.esm.js';\nimport { e as isZkSyncChain, f as ENTRYPOINT_ADDRESS } from './utils-f58e7acc.browser.esm.js';\nimport { Signer, ethers, utils, BigNumber } from 'ethers';\nimport { defineReadOnly } from 'ethers/lib/utils';\nimport 'eventemitter3';\nimport './url-a45219bd.browser.esm.js';\nimport '@thirdweb-dev/chains';\nimport './headers-733a8199.browser.esm.js';\nimport '../evm/wallets/abstract/dist/thirdweb-dev-wallets-evm-wallets-abstract.browser.esm.js';\nimport '@thirdweb-dev/sdk';\nimport '@account-abstraction/contracts';\n\nconst DEFAULT_GAS_PER_PUBDATA_LIMIT = 50000;\nconst EIP712_TX_TYPE = 0x71;\nconst EIP712_TYPES = {\n  Transaction: [{\n    name: \"txType\",\n    type: \"uint256\"\n  }, {\n    name: \"from\",\n    type: \"uint256\"\n  }, {\n    name: \"to\",\n    type: \"uint256\"\n  }, {\n    name: \"gasLimit\",\n    type: \"uint256\"\n  }, {\n    name: \"gasPerPubdataByteLimit\",\n    type: \"uint256\"\n  }, {\n    name: \"maxFeePerGas\",\n    type: \"uint256\"\n  }, {\n    name: \"maxPriorityFeePerGas\",\n    type: \"uint256\"\n  }, {\n    name: \"paymaster\",\n    type: \"uint256\"\n  }, {\n    name: \"nonce\",\n    type: \"uint256\"\n  }, {\n    name: \"value\",\n    type: \"uint256\"\n  }, {\n    name: \"data\",\n    type: \"bytes\"\n  }, {\n    name: \"factoryDeps\",\n    type: \"bytes32[]\"\n  }, {\n    name: \"paymasterInput\",\n    type: \"bytes\"\n  }]\n};\nclass ZkWrappedSigner extends Signer {\n  constructor(signer, httpRpcClient) {\n    super();\n    this.signer = signer;\n    defineReadOnly(this, \"provider\", signer.provider);\n    this.httpRpcClient = httpRpcClient;\n  }\n  async getAddress() {\n    return await this.signer.getAddress();\n  }\n  async signMessage(message) {\n    return await this.signer.signMessage(message);\n  }\n  async signTransaction(transaction) {\n    return await this.signer.signTransaction(transaction);\n  }\n  connect(provider) {\n    return new ZkWrappedSigner(this.signer.connect(provider), this.httpRpcClient);\n  }\n  _signTypedData(domain, types, value) {\n    return this.signer._signTypedData(domain, types, value);\n  }\n  async sendTransaction(transaction) {\n    return await this.sendZkSyncTransaction(transaction);\n  }\n  async sendZkSyncTransaction(_transaction) {\n    let transaction = await this.populateTransaction(_transaction);\n    if (!transaction.chainId) {\n      throw new Error(\"ChainId is required to send a ZkSync transaction\");\n    }\n    if (!this.provider) {\n      throw new Error(\"Provider is required to send a ZkSync transaction\");\n    }\n    const address = await this.getAddress();\n    const gasLimit = ethers.BigNumber.from(transaction.gasLimit || (await this.provider.estimateGas(transaction))).mul(3);\n    const gasPrice = ethers.BigNumber.from(transaction.gasPrice || (await this.provider.getGasPrice())).mul(2);\n    if (!transaction.maxFeePerGas) {\n      transaction.maxFeePerGas = gasPrice;\n    } else {\n      transaction.maxFeePerGas = transaction.maxFeePerGas.mul(2);\n    }\n    if (!transaction.maxPriorityFeePerGas) {\n      transaction.maxPriorityFeePerGas = gasPrice;\n    } else {\n      transaction.maxPriorityFeePerGas = transaction.maxPriorityFeePerGas.mul(2);\n    }\n    transaction = {\n      ...transaction,\n      from: address,\n      gasLimit,\n      gasPrice,\n      chainId: (await this.provider.getNetwork()).chainId,\n      nonce: await this.provider.getTransactionCount(address),\n      type: 113,\n      value: BigInt(0)\n    };\n    const pmDataResult = await this.httpRpcClient?.zkPaymasterData(transaction);\n    transaction.customData = {\n      gasPerPubdata: DEFAULT_GAS_PER_PUBDATA_LIMIT,\n      factoryDeps: [],\n      paymasterParams: {\n        paymaster: pmDataResult.paymaster,\n        paymasterInput: pmDataResult.paymasterInput\n      }\n    };\n    const eip712tx = {\n      txType: EIP712_TX_TYPE,\n      from: BigInt(transaction.from || (await this.getAddress())).toString(),\n      to: BigInt(transaction.to || \"0x0\").toString(),\n      gasLimit: transaction.gasLimit ? Number(transaction.gasLimit) : 0,\n      gasPerPubdataByteLimit: DEFAULT_GAS_PER_PUBDATA_LIMIT,\n      maxFeePerGas: ethers.BigNumber.from(transaction.maxFeePerGas).toNumber(),\n      maxPriorityFeePerGas: ethers.BigNumber.from(transaction.maxPriorityFeePerGas).toNumber(),\n      paymaster: BigInt(pmDataResult.paymaster).toString(),\n      nonce: ethers.BigNumber.from(transaction.nonce).toNumber(),\n      value: ethers.BigNumber.from(transaction.value).toNumber(),\n      data: transaction.data || \"0x\",\n      factoryDeps: [],\n      paymasterInput: ethers.utils.arrayify(pmDataResult.paymasterInput)\n    };\n    const signature = await this._signTypedData({\n      name: \"zkSync\",\n      version: \"2\",\n      chainId: transaction.chainId\n    }, EIP712_TYPES, eip712tx);\n    const serializedTx = this.serialize(transaction, signature);\n    const zkSignedTx = {\n      from: transaction.from?.toString() || (await this.getAddress()),\n      to: transaction.to?.toString() || \"\",\n      gas: transaction.gasLimit?.toString() || \"\",\n      maxFeePerGas: transaction.maxFeePerGas?.toString() || \"0\",\n      maxPriorityFeePerGas: transaction.maxPriorityFeePerGas?.toString() || \"0\",\n      signedTransaction: serializedTx,\n      paymaster: pmDataResult.paymaster\n    };\n    const broadcastResult = await this.httpRpcClient?.zkBroadcastTransaction(zkSignedTx);\n    const hash = broadcastResult.transactionHash;\n    return await this.provider?.getTransaction(hash);\n  }\n  serialize(transaction, signature) {\n    if (!transaction.customData && transaction.type !== EIP712_TX_TYPE) {\n      return utils.serializeTransaction(transaction, signature);\n    }\n    if (!transaction.chainId) {\n      throw Error(\"Transaction chainId isn't set!\");\n    }\n    function formatNumber(value, name) {\n      const result = utils.stripZeros(BigNumber.from(value).toHexString());\n      if (result.length > 32) {\n        throw new Error(`Invalid length for ${name}!`);\n      }\n      return result;\n    }\n    if (!transaction.from) {\n      throw new Error(\"Explicitly providing `from` field is required for EIP712 transactions!\");\n    }\n    const from = transaction.from;\n    const meta = transaction.customData ?? {};\n    const maxFeePerGas = transaction.maxFeePerGas || transaction.gasPrice || 0;\n    const maxPriorityFeePerGas = transaction.maxPriorityFeePerGas || maxFeePerGas;\n    const fields = [formatNumber(transaction.nonce || 0, \"nonce\"), formatNumber(maxPriorityFeePerGas, \"maxPriorityFeePerGas\"), formatNumber(maxFeePerGas, \"maxFeePerGas\"), formatNumber(transaction.gasLimit || 0, \"gasLimit\"), transaction.to ? utils.getAddress(transaction.to) : \"0x\", formatNumber(transaction.value || 0, \"value\"), transaction.data || \"0x\"];\n    if (signature) {\n      const sig = utils.splitSignature(signature);\n      fields.push(formatNumber(sig.recoveryParam, \"recoveryParam\"));\n      fields.push(utils.stripZeros(sig.r));\n      fields.push(utils.stripZeros(sig.s));\n    } else {\n      fields.push(formatNumber(transaction.chainId, \"chainId\"));\n      fields.push(\"0x\");\n      fields.push(\"0x\");\n    }\n    fields.push(formatNumber(transaction.chainId, \"chainId\"));\n    fields.push(utils.getAddress(from));\n\n    // Add meta\n    fields.push(formatNumber(meta.gasPerPubdata || DEFAULT_GAS_PER_PUBDATA_LIMIT, \"gasPerPubdata\"));\n    fields.push((meta.factoryDeps ?? []).map(dep => utils.hexlify(dep)));\n    if (meta.customSignature && ethers.utils.arrayify(meta.customSignature).length === 0) {\n      throw new Error(\"Empty signatures are not supported!\");\n    }\n    fields.push(meta.customSignature || \"0x\");\n    if (meta.paymasterParams) {\n      fields.push([meta.paymasterParams.paymaster, ethers.utils.hexlify(meta.paymasterParams.paymasterInput)]);\n    } else {\n      fields.push([]);\n    }\n    return utils.hexConcat([[EIP712_TX_TYPE], utils.RLP.encode(fields)]);\n  }\n}\n\nclass ZkSyncConnector extends Connector {\n  constructor(config) {\n    super();\n    _defineProperty(this, \"chainId\", 1);\n    this.config = config;\n  }\n  async connect(args) {\n    this.personalWallet = args.personalWallet;\n    this.chainId = await (await this.personalWallet.getSigner()).getChainId();\n    if (!(await isZkSyncChain(this.chainId))) {\n      throw new Error(\"Invalid zksync chain id\");\n    }\n    const bundlerUrl = this.config.bundlerUrl || `https://${this.chainId}.bundler.thirdweb.com`;\n    const entryPointAddress = this.config.entryPointAddress || ENTRYPOINT_ADDRESS;\n    this.httpRpcClient = new HttpRpcClient(bundlerUrl, entryPointAddress, this.chainId, this.config.clientId, this.config.secretKey);\n    return this.getAddress();\n  }\n  disconnect() {\n    throw new Error(\"Method not implemented.\");\n  }\n  async getAddress() {\n    const signer = await this.getSigner();\n    return signer.getAddress();\n  }\n  async getSigner() {\n    if (!this.personalWallet) {\n      throw new Error(\"Wallet not connected\");\n    }\n    return new ZkWrappedSigner(await this.personalWallet.getSigner(), this.httpRpcClient);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  switchChain(chainId) {\n    throw new Error(\"Method not implemented.\");\n  }\n  isConnected() {\n    return Promise.resolve(!!this.personalWallet);\n  }\n  setupListeners() {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  updateChains(chains) {\n    throw new Error(\"Method not implemented.\");\n  }\n  async getProvider() {\n    if (!this.getSigner()) {\n      throw new Error(\"Personal wallet not connected\");\n    }\n    const signer = await this.getSigner();\n    if (!signer.provider) {\n      throw new Error(\"Provider not found\");\n    }\n    return signer.provider;\n  }\n}\n\nexport { ZkSyncConnector };\n"],"names":["async","hexlifyUserOp","op","userOp","utils","Object","keys","map","key","val","startsWith","reduce","set","_ref","k","v","getUserOpHashV06","entryPoint","chainId","hashedUserOp","sender","nonce","initCodeHash","initCode","callDataHash","callData","callGasLimit","verificationGasLimit","preVerificationGas","maxFeePerGas","maxPriorityFeePerGas","paymasterAndDataHash","paymasterAndData","encoded","encode","components","type","name","userOpHash","enc","randomNonce","hexString","generateRandomUint192","rand1","BigInt","Math","floor","random","rand2","rand3","rand4","rand5","rand6","toString","length","BigNumber","from","DEBUG","HttpRpcClient","constructor","bundlerUrl","entryPointAddress","clientId","secretKey","this","headers","isTwUrl","bundleId","globalThis","APP_BUNDLE_ID","undefined","TW_AUTH_TOKEN","TW_CLI_AUTH_TOKEN","setAnalyticsHeaders","userOpJsonRpcProvider","providers","url","initializing","validateChainId","isZkSyncChain","chain","send","bundlerChain","parseInt","Error","sendUserOpToBundler","userOp1","hexifiedUserOp","jsonRequestData","printUserOperation","estimateUserOpGas","data","verificationGas","add","MANAGED_ACCOUNT_GAS_BUFFER","getUserOperationGasPrice","getUserOperationReceipt","zkPaymasterData","transactionInput","gas","gasLimit","zkBroadcastTransaction","method","DEFAULT_GAS_PER_PUBDATA_LIMIT","EIP712_TYPES","Transaction","ZkWrappedSigner","Signer","signer","httpRpcClient","super","defineReadOnly","provider","getAddress","signMessage","message","signTransaction","transaction","connect","_signTypedData","domain","types","value","sendTransaction","sendZkSyncTransaction","_transaction","populateTransaction","address","ethers","estimateGas","mul","gasPrice","getGasPrice","getNetwork","getTransactionCount","pmDataResult","customData","gasPerPubdata","factoryDeps","paymasterParams","paymaster","paymasterInput","eip712tx","txType","to","Number","gasPerPubdataByteLimit","toNumber","signature","version","serializedTx","serialize","zkSignedTx","signedTransaction","hash","transactionHash","getTransaction","formatNumber","result","toHexString","meta","fields","sig","push","recoveryParam","r","s","dep","customSignature","ZkSyncConnector","Connector","config","_defineProperty","args","personalWallet","getSigner","getChainId","ENTRYPOINT_ADDRESS","disconnect","switchChain","isConnected","Promise","resolve","setupListeners","updateChains","chains","getProvider"],"sourceRoot":""}